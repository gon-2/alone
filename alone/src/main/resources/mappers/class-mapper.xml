<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper			
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"			
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kh.alone.mappers.class">

	
	
	<!-- info_code로 찾기 -->	
		<select id="selectByCno" resultType="ClassInfoVo">
			select * from c_class_info
			where info_code = #{info_code}
		</select>
		
	<!-- 전체보기 -->
	<select id="selectAll" resultType="ClassInfoVo">
	select info_code, c_title, c_time, cate_code, time_code, start_date, end_date,
			decode ( cate_code, 1, '프로그램', 2, '사무자동화', 3, '제품디자인', 4, '3D프린트', 5, '디자인')cate_code_name,
				decode ( time_code, 1, '주간반', 2, '야간반', 3, '주말반')time_code_name
        from c_class_info
			
	</select>
	

	<!-- 주말 주간 야간 구하기 -->
	<select id="classListByTimeCode" resultType="ClassInfoVo">
		select info_code, c_title, c_time, cate_code, time_code, start_date, end_date,
			decode ( cate_code, 1, '프로그램', 2, '사무자동화', 3, '제품디자인', 4, '3D프린트', 5, '디자인')cate_code_name,
				decode ( time_code, 1, '주간반', 2, '야간반', 3, '주말반')time_code_name
        from c_class_info
		where time_code = #{time_code}
	</select>

	
	<!-- 수업 파트별 구하기 -->
	<select id="classListByCateCode" resultType="ClassInfoVo">
		select info_code, c_title, c_time, cate_code, time_code, start_date, end_date,
			decode ( cate_code, 1, '프로그램', 2, '사무자동화', 3, '제품디자인', 4, '3D프린트', 5, '디자인')cate_code_name,
			decode ( time_code, 1, '주간반', 2, '야간반', 3, '주말반')time_code_name
        from c_class_info
        where cate_code = #{cate_code}
	</select>
	
	
	<!-- 신청양식 추가하기 -->
	<insert id="insertOnlineRegist">
		insert into student_class_regist(r_num, info_code, student_name, gender, nationality, phone_num, home_num, e_mail, 
								  		  employment, employment_center, employment_staff, employment_num)
								  
		values(#{r_num}, #{info_code}, #{student_name}, #{gender}, #{nationality}, #{phone_num}, #{home_num, jdbcType=VARCHAR}, #{e_mail}, 
		        #{employment, jdbcType=VARCHAR}, #{employment_center, jdbcType=VARCHAR}, #{employment_staff, jdbcType=VARCHAR}, #{employment_num, jdbcType=VARCHAR})
	</insert>


	<!-- 신청양식 전체보기 -->
	<select id="selectOnline_regist" resultType="StudentClassRegistVo">
		select * from student_class_regist
	</select>
	
	<!-- 주민번호로 수강신청 조회하기 -->
	<select id="selectMine" resultType="StudentClassRegistVo">
		select * from student_class_regist
		where r_num = #{r_num}
	</select>
	
	<select id="selectMineList" resultType="StudentClassRegistVo">
		select s.student_name, i.c_title, i.start_date, i.end_date, i.c_time,
			decode ( time_code, 1, '주간반', 2, '야간반', 3, '주말반')time_code_name
			from student_class_regist s, c_class_info i
		where s.info_code = i.info_code AND s.r_num = #{r_num}
	</select>
	
	
</mapper>